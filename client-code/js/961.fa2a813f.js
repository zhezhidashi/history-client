"use strict";(self["webpackChunkvue_mange"]=self["webpackChunkvue_mange"]||[]).push([[961],{81992:(t,e,a)=>{a.r(e),a.d(e,{default:()=>N});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Background MainSearch"},[e("Search",{attrs:{Arguments:t.Arguments},on:{ChangeArguments:t.ChangeArguments}}),e("div",{staticClass:"ConditionResult"},[e("Condition",{attrs:{Arguments:t.Arguments,ResourceFieldList:t.ResourceFieldList},on:{ChangeArguments:t.ChangeArguments,FilterButton:t.FilterButton}}),e("Result",{attrs:{Arguments:t.Arguments,NowIndex:t.NowIndex,TotalPages:t.TotalPages,SearchResult:t.SearchResult},on:{ChangePages:t.ChangePages}})],1)],1)},s=[],i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Container"},[e("div",{staticClass:"ContentContainer"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Arguments.Keywords,expression:"Arguments.Keywords"}],staticClass:"SearchContentStyle SearchContent",attrs:{type:"search",placeholder:"请输入关键词"},domProps:{value:t.Arguments.Keywords},on:{input:function(e){e.target.composing||t.$set(t.Arguments,"Keywords",e.target.value)}}})]),e("div",{staticClass:"SearchLogoContainer",staticStyle:{position:"relative"},on:{click:t.ChangeArguments}},[e("img",{staticClass:"SearchLogo",attrs:{src:"SearchLogo.svg",alt:""}})])])},r=[];const o={name:"Search",props:{Arguments:{type:Object}},data:function(){return{}},methods:{ChangeArguments:function(){this.$emit("ChangeArguments",this.Arguments)}}},u=o;var l=a(1001),c=(0,l.Z)(u,i,r,!1,null,"fb86c408",null);const m=c.exports;var h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Container"},[e("div",{staticClass:"SearchBlock",staticStyle:{height:"7vw"}},[e("div",{staticClass:"SearchType"},[t._v("时间")]),e("div",{staticClass:"SearchTime"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Arguments.TimeFrom,expression:"Arguments.TimeFrom"}],staticClass:"AdvancedSearchInput InputTime",attrs:{placeholder:""},domProps:{value:t.Arguments.TimeFrom},on:{input:function(e){e.target.composing||t.$set(t.Arguments,"TimeFrom",e.target.value)}}}),e("div",{staticClass:"SearchText"},[t._v("至")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.Arguments.TimeTo,expression:"Arguments.TimeTo"}],staticClass:"AdvancedSearchInput InputTime",attrs:{placeholder:""},domProps:{value:t.Arguments.TimeTo},on:{input:function(e){e.target.composing||t.$set(t.Arguments,"TimeTo",e.target.value)}}})])]),e("div",{staticClass:"SearchBlock",staticStyle:{height:"7vw"}},[e("div",{staticClass:"SearchType"},[t._v("语种")]),e("div",{staticClass:"InputContainer"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.Arguments.Language,expression:"Arguments.Language"}],staticClass:"AdvancedSearchInput InputLanguage",attrs:{placeholder:""},domProps:{value:t.Arguments.Language},on:{input:function(e){e.target.composing||t.$set(t.Arguments,"Language",e.target.value)}}})])]),e("div",{staticClass:"RedButton FilterButton",on:{click:t.FilterButton}},[t._v("筛选")])])},g=[];const d={name:"Condition",props:{Arguments:{type:Object},ResourceFieldList:{type:Array}},data:function(){return{}},methods:{FilterButton:function(){this.$emit("FilterButton",this.ResourceFieldList)}}},p=d;var v=(0,l.Z)(p,h,g,!1,null,"9663fdf4",null);const f=v.exports;var C=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"Container"},[t._l(t.SearchResult,(function(a,n){return e("div",{key:n},[e("div",{staticClass:"ItemContainer"},[e("div",{staticClass:"ImageItem"},[e("div",{staticClass:"ImageHover"},[e("div",{staticClass:"RedButton SeeVideo",on:{click:function(e){return t.GoToPage(a)}}},[t._v(" 查看详情 ")])]),e("div",{staticClass:"BackgroundImage ImageContainer",style:"background-image:url(".concat(a.Image,")")})]),e("div",{staticClass:"TextContainer"},[e("div",{staticClass:"TextTitle",on:{click:function(e){return t.GoToPage(a)}}},[t._v(" "+t._s(a.Title)+" ")])])])])})),e("div",{staticClass:"ShiftContainer"},[e("img",{staticClass:"ShiftLeft",attrs:{src:"ShiftLeft.svg",alt:""},on:{click:function(e){return t.PageShift(-1)}}}),e("div",{staticClass:"ShiftPages"},[t._v(" "+t._s(t.NowIndex)+"   /   "+t._s(t.TotalPages)+" ")]),e("img",{staticClass:"ShiftRight",attrs:{src:"ShiftRight.svg",alt:""},on:{click:function(e){return t.PageShift(1)}}})])],2)])},T=[],_=(a(9653),a(74916),a(23123),a(95114));const P={name:"Result",props:{Arguments:{type:Object},NowIndex:{type:Number},TotalPages:{type:Number},SearchResult:{type:Array}},data:function(){return{}},methods:{PageShift:function(t){this.NowIndex+t>0&&this.NowIndex+t<=this.TotalPages?this.$emit("ChangePages",t):this.$message({type:"warning",message:"已经是第一页或最后一页"})},GoToPage:function(t){var e=this,a=t.Path.split("/");if("archives"===a[1]){var n=t.Path.split("/"),s={TabIndex:0,ContentStatus:0,Path1:n[0]+"/"+n[1]+"/"+n[2],Path2:n[0]+"/"+n[1]+"/"+n[2]+"/"+n[3],Path3:n[0]+"/"+n[1]+"/"+n[2]+"/"+n[3]+"/"+n[4],PeopleName:"",TabName:"",LetterName:"",LetterTemplateID:t.TemplateID};(0,_.B0)(e,s.Path1,(function(t){s.PeopleName=t,(0,_.B0)(e,s.Path2,(function(t){s.TabName=t,(0,_.CK)(e,(function(t){var a={location_id:99999999,page_index:1,page_size:99999,sort_by:"-show_time",path:s.Path1,deep_range:1,filter_rule:{},order_rule:{method:"show_time",order:"+"},template_id_list:[]};(0,_.Md)("/data/list",a,e,(function(a){for(var n=a.data.list,i=0;i<n.length;i++){var r=n[i];for(var o in r.content)(0,_.VX)(t[o],"标题")&&r.content[o]===s.TabName&&(s.TabIndex=i/6,s.ContentStatus=i)}(0,_.B0)(e,s.Path3,(function(t){s.LetterName=t,console.log("&&&",s),e.$router.push({name:"PkuPeople4",query:s})}))}))}))}))}))}else if("interview"===a[1]){var i=t.Path.split("/"),r={TabIndex:0,ContentStatus:0,Path1:i[0]+"/"+i[1]+"/"+i[2],Path2:i[0]+"/"+i[1]+"/"+i[2]+"/"+i[3],Path3:i[0]+"/"+i[1]+"/"+i[2]+"/"+i[3]+"/"+i[4],PeopleName:"",TabName:"",LetterName:"",LetterTemplateID:t.TemplateID};(0,_.B0)(e,r.Path1,(function(t){r.PeopleName=t,(0,_.B0)(e,r.Path2,(function(t){r.TabName=t,(0,_.CK)(e,(function(t){var a={location_id:99999999,page_index:1,page_size:99999,sort_by:"-show_time",path:r.Path1,deep_range:1,filter_rule:{},order_rule:{method:"show_time",order:"+"},template_id_list:[]};(0,_.Md)("/data/list",a,e,(function(a){for(var n=a.data.list,s=0;s<n.length;s++){var i=n[s];for(var o in i.content)(0,_.VX)(t[o],"标题")&&i.content[o]===r.TabName&&(r.TabIndex=s/6,r.ContentStatus=s)}(0,_.B0)(e,r.Path3,(function(t){r.LetterName=t,console.log("&&&",r),e.$router.push({name:"OralHistory4",query:r})}))}))}))}))}))}else"picture"===a[1]?this.$router.push({name:"Events31",query:{Path:t.Path,TemplateID:t.TemplateID}}):"event"===a[1]?this.$router.push({name:"Events32",query:{Path:t.Path,TemplateID:t.TemplateID}}):"ancient_book"===a[1]?this.$router.push({name:"AntiqueWorks31",query:{Path:t.Path,TemplateID:t.TemplateID}}):"reservation"===a[1]&&this.$router.push({name:"AntiqueWorks32",query:{Path:t.Path,TemplateID:t.TemplateID}})}}},A=P;var I=(0,l.Z)(A,C,T,!1,null,"60044cb2",null);const S=I.exports,y={name:"MainSearch",components:{Search:m,Condition:f,Result:S},data:function(){return{Arguments:{Keywords:"",TimeFrom:"",TimeTo:"",Language:""},SearchResult:[{Title:"李明滨口述史",Time:"2010/11/8",Location:"访谈地点：外文楼217",Image:"李明滨.jpg"},{Title:"韦旭升口述史",Time:"2010/11/8",Location:"访谈地点：外文楼217",Image:"韦旭升.jpg"}],NowIndex:1,TotalPages:1,ResourceFieldList:["信件信函","书稿","手稿","日记","笔记","公文","会议资料","出版合同","其他","列表：印像","列表：事纪","口述史音频","口述史视频","列表：古籍","列表：特藏"]}},methods:{ChangeArguments:function(t){this.Arguments=t,this.GetList()},ChangePages:function(t){this.NowIndex+=t,this.GetList()},FilterButton:function(t){this.ResourceFieldList=t,this.GetList()},GetList:function(){var t=this;t.SearchResult=[];var e={},a=[];(0,_.OE)(t,t.Arguments,(function(n){e=n,(0,_.xU)(t.ResourceFieldList,(function(n){a=n,console.log("***",t.Arguments,t.ResourceFieldList,e,a),(0,_.CK)(t,(function(n){var s={location_id:99999999,page_index:t.NowIndex,page_size:6,sort_by:"-show_time",path:"root",deep_range:0,filter_rule:e,order_rule:{method:"show_time",order:"+"},template_id_list:a};(0,_.Md)("/data/list",s,t,(function(e){var a=e.data.list;t.TotalPages=e.data.total_page;for(var s=0;s<a.length;s++){var i=a[s],r={Path:i.path,TemplateID:i.template_id,Title:"",Image:"",Description:""};for(var o in i.content)(0,_.VX)(n[o],"标题")?r.Title=i.content[o]:(0,_.VX)(n[o],"图片")?r.Image=i.content[o]:((0,_.VX)(n[o],"描述")||(0,_.VX)(n[o],"简介"))&&(r.Description=i.content[o]);t.SearchResult.push(r)}}))}))}))}))}},mounted:function(){this.Arguments.Keywords=this.$route.query.Keywords,this.GetList()}},w=y;var L=(0,l.Z)(w,n,s,!1,null,"51a2f561",null);const N=L.exports}}]);
//# sourceMappingURL=961.fa2a813f.js.map